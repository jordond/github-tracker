<div class="gt-card c-m-12">
  <div class="gt-card-content">
    <div class="gt-card-header">
      <h3>Latest Activity</h3>
      <div class="btn btn-link pull-right refresh" ng-click="vm.refresh()">
        <i class="gt-refresh-icon" ng-class="{ 'gt-icon-spin': vm.isRefreshing }"></i>
      </div>
    </div>
    <div class="gt-card-loading" ng-hide="vm.activity.isLoaded">
      <i class="gt-loading-icon gt-icon-spin"></i>
      <h4>{{ vm.loadingMessage }}</h4>
    </div>
    <div class="gt-card-info" ng-show="vm.activity.isLoaded" ng-hide="vm.activity.hasError">
      <div class="gt-row gt-card-event-title">
        <div class="c-m-4 c-s-6 c-xs-6">
          <h4>Repository</h4>
        </div>
        <div class="c-m-8 c-s-6 c-xs-6">
          <h4>Commits</h4>
        </div>
      </div>
      <div class="gt-row gt-card-event" ng-repeat="event in vm.activity.events">
        <div class="c-m-4">
          <a href="http://github.com/{{ event.repo.name }}" target="_blank">
            <i class="gt-github-icon"></i> {{ event.repo.name }}
          </a>
          <div am-time-ago="event.created_at"></div>
        </div>
        <div class="c-m-8">
          <p ng-repeat="commit in event.payload.commits | filter:{distinct: true} | limitTo:vm.commitLimit || 3">
            <a href="http://github.com/{{ event.repo.name }}/tree/{{ event.payload.ref | branch }}" target="_blank">
              {{ event.payload.ref | branch }}
            </a>
            &commat;
            <a href="http://github.com/{{ event.repo.name }}/commit/{{ commit.sha }}" target="_blank">
              {{ commit.sha | limitTo:10 }}
            </a>
            <br>
            {{ commit.message }}
          </p>
        </div>
      </div>
    </div>
    <div class="gt-card-error" ng-show="vm.activity.hasError && !vm.isRefreshing">
      <h4>Whoops... Something went wrong.</h4>
      <p>{{ vm.activity.message }}</p>
    </div>
  </div>
</div>